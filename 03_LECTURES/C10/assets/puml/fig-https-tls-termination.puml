@startuml
title HTTPS and TLS termination

box "Variant A: TLS terminated at proxy"
  participant ClientA as "Client"
  participant "Nginx\n(TLS)" as NginxA
  participant "Backend\nHTTP" as BackendA

  ClientA -> NginxA : HTTPS request
  NginxA -> BackendA : HTTP request\n(X-Forwarded-Proto=https)
  BackendA --> NginxA : HTTP response
  NginxA --> ClientA : HTTPS response
end box

box "Variant B: TLS end-to-end"
  participant ClientB as "Client"
  participant "Nginx\n(TCP passthrough)" as NginxB
  participant "Backend\nTLS" as BackendB

  ClientB -> NginxB : TLS-encrypted stream
  NginxB -> BackendB : TLS-encrypted stream
end box

@enduml
